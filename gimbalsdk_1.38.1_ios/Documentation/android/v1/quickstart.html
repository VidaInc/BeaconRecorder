<!DOCTYPE html>
<html lang="en">
<head>
    <title>Gimbal Android V1 Quickstart</title>

    <meta name="description" content="">
    <meta name="author" content="">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="../../css/bootstrap.css" rel="stylesheet">
    <link href="../../css/overrides.css" rel="stylesheet">
    <link href="../../css/bootstrap-responsive.css" rel="stylesheet">
    <link href="../../css/prettify.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="../../images/favicon.ico">
</head>

<body data-spy="scroll" data-target=".sidebar-nav" onload="prettyPrint();">

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">

            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" href="https://manager.gimbal.com"><img src="../../images/gimbal_logo.png"></a>

            <div class="nav-collapse collapse">
                <ul class="nav">
                      
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            Overview
                            <b class="caret black-caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="../../index.html">Overview</a></li>
                            <li><a href="../../proximity_overview.html">Proximity Overview</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            iOS
                            <b class="caret black-caret"></b>
                        </a>
                        <ul class="dropdown-menu">

                          <li class="dropdown-submenu"><a href="#">Version 2 API</a>
                            <ul class="dropdown-menu">
                                    <li><a href="../../iosdocs/v2/devguide.html">Developer Guide</a></li>
                                    <li><a href="../../ios_v2_api/index.html">API Reference</a></li>
                            </ul>
                          </li> 
                          <li class="dropdown-submenu"><a href="#">Version 1 API</a>
                                <ul class="dropdown-menu">
                                    <li><a href="../../iosdocs/v1/quickstart.html">Quickstart</a></li>
                                    <li><a href="../../iosdocs/v1/devguide.html">Developer Guide</a></li>
                                    <li><a href="../../ios/html/index.html">API Reference</a></li>
                                </ul>
                          </li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            Android
                            <b class="caret black-caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                          <li class="dropdown-submenu"><a href="#">Version 2 API</a>
                            <ul class="dropdown-menu">
                                    <li><a href="../../android/v2/devguide.html">Developer Guide</a></li>
                            </ul>
                          </li>
                          <li class="dropdown-submenu"><a href="#">Version 1 API</a>
                              <ul class="dropdown-menu">
                                    <li><a href="../../android/v1/quickstart.html">Quickstart</a></li>
                                    <li><a href="../../android/v1/devguide.html">Developer Guide</a></li>
                                </ul>
                          </li>
                        </ul>
                    </li>


                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            REST API
                            <b class="caret black-caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="../../restapi/rest.html">Manager REST API</a></li>
                            <li><a href="../../restapi/restV2.html">Places REST API Beta</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            User Manuals
                            <b class="caret black-caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="../../manuals/S21.html">Series 21 Proximity Beacon</a></li>
                        </ul>
                    </li>



                </ul>
            </div>
        </div>
    </div>
</div>
 

    <div class="row-fluid">

	<div class="span3">
		<div id="sidenav" class="well sidebar-nav sidebar-nav-fixed" style="overflow-y:auto;height:auto;">
			<ul class="nav nav-list">
				<li class="nav-header">Setup</li>
                <li><a href="#create_your_developer_account">Create Your Developer Account</a></li>
				<li><a href="#create_android_app">Create Your Application</a></li>
				<li class="dropdown">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#">Enable Gimbal <b class="caret"></b></a>
					<ul class="dropdown-menu">
                        <li><a href="#create_api_key">Create Your API Key</a></li>
						<li><a href="#configure_your_application_for_gimbal_sdk">Configure Your Application</a></li>
						<li><a href="#enable_context_core_connector">Enable Context Core Connector</a></li>
						<li><a href="#run_application">Run Your Application</a></li>
                    </ul>
                </li>
                <li class="nav-header">Geofence</li>
                    <li><a href="#listen_for_places">Listen for Place Events</a></li>
                    <li><a href="#create_geofence">Create a Geofence</a></li>
                    <li><a href="#run_application_geo">Run Your Application</a></li>
                <li class="nav-header">Push</li>
                    <li><a href="#google_setup">Google Setup</a></li>
                    <li><a href="#enable_gimbal_push">Enable Gimbal Push</a></li>
                    <li><a href="#add_push_to_manager">Configure Push on Manager</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Configure Push on Application<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#add_google_play_services">Add Google Play Services</a></li>
                            <li><a href="#application_manifest_changes">Application Manifest Changes</a></li>
                            <li><a href="#register_for_push_notifications">Register for Push Notifications</a></li>
                            <li><a href="#receive_push_content">Receive Push Content</a></li>
                        </ul>
                    </li>
                    <li><a href="#send_push_to_application">Send Push To Application</a></li>
                    <li><a href="#learn_more">Learn More</a></li>
			</ul>
		</div>
	</div>

    <div class="span9">

        <div class="hero-unit">

            <h1>Android Version 1 Quick Start</h1>

            <p>Get Gimbal up and running in your Android App.</p>

        </div>


        <div id="create_your_developer_account" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h1>Create Your Developer Account</h1>

        <p>Go to the Gimbal Manager and create an account.</p>

        <p><a href="https://manager.gimbal.com/login/users/sign_up" class="btn btn-primary btn-large"
              target="_blank">Gimbal Manager &raquo;</a></p>
    </div>

</div>
        <div id="create_android_app" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h1>Create Your Android Application</h1>

        <p>The following steps will set up an application in Eclipse ready for enabling Gimbal features.</p>

    </div>
</div>

<div id="confirm_your_environment" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Confirm Your Environment</h2>

        <p>Make sure you:</p>

        <div class="well">
            <ul>
                <li>Have a device with Android 2.2 or higher</li>
                <li>Are using <a href='http://www.eclipse.org/downloads/' target='_blank'>Eclipse Indigo</a> (3.7) or higher</li>
                <li>Have installed the <a href='http://developer.android.com/tools/sdk/eclipse-adt.html' target='_blank'>Eclipse Android ADT plug-in</a></li>
                <li><a href='http://developer.android.com/sdk/installing/adding-packages.html' target='_blank'>Use the ADT plug-in</a> to download a version of Android greater than or equal to API 8: Android 2.2</li>
            </ul>
        </div>
    </div>
</div>

<div id="create_new_eclipse_project" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Create a new Eclipse project</h2>

        <p>In Eclipse choose <code>File > New > Project</code> and search for "Android Application Project" as seen below.</p>

        <p><img src="../../images/eclipse-android-wizard.png"/></p>

        <p>Fill out your "Application Name", "Project Name", and "Package Name" fields.</p> 

        <p><b><span class="label label-important">Important</span></b> Make sure the "Minimum Required SDK", "Target SDK", and "Compile With" fields are set to <span class="stand_out_text">at least API 8: Android 2.2</span>. Then click through the rest of the "New Android Application" setup wizard.</p>

        <p><img src="../../images/eclipse-android-project-naming.png"/></p>

    </div>
</div>

        
<div id="add_jars" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Add these jars to your project</h2>

        <div class="well">
            <ul>
                <li>Context-Core.jar</li>
                <li>Context-Location.jar</li>
                <li>android-logging.jar</li>
                <li>spring-android-rest-template-1.0.1.RELEASE.jar</li>
                <li>spring-android-core-1.0.1.RELEASE.jar </li>
            </ul>
        </div>

        <p><b><span class="label label-info">Note</span></b> You will find these jars in the <code>client-sample-mall-mart-embed/libs</code> folder inside the Gimbal SDK zip file.</p>

        <p>Add jars to your Android application by copy and pasting them into the <code>libs</code> folder of your android project.</p>

        <p>Your project should now look similar to this:</p>

        <p><img src="../../images/eclipse-libraries.png"/></p>

    </div>
</div>

<div id="create_api_key" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Create Your Gimbal Application</h2>

        <p>Follow the link below to create your application in Manager.</p>

        <p><b><span class="label label-info">Note</span></b> This link should take you to the "Production" environment. You can check by looking in the top right part of the page and verifying that it says "Production".</p>


        <p><a href="https://manager.gimbal.com/apps/new"
              class="btn btn-primary btn-large" target="_blank">Create Gimbal Application &raquo;</a></p>

        <p>Fill in the fields to look something like this: </p>

        <p><img src="../../images/generate-android-api-key.png"></p>

        <p>Then click Generate.</p>

        <p>Your newly generated API key should appear under your package name.</p>

    </div>
</div>

<div id="configure_your_application_for_gimbal_sdk" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Configure Your Application for the Gimbal SDK</h2>

        <p>In order for your application to use Gimbal API's, it has to authenticate itself by providing your API key, name, and desired capabilities. You will need to create a file called <code>usercontext.properties</code> at the location <code>assets/properties</code>. You may have to create the <code>properties</code> folder yourself.</p>

        <p><img src="../../images/usercontext-properties-tree.png"></p>

        <p>You will add three lines to your file so it looks like the following:</p>

        <p><img src="../../images/usercontext-properties.png"></p>

        <p>
            <div class="well">
                <ul>
                    <li>Line 1 specifies your API key that you just generated. Copy and paste it into the specified spot.</li>
                    <li>Line 2 is the text you wish to use in your application to describe the value-added feature you are providing for your users.</li>
                    <li>Line 3 tells Gimbal that you will be using its geofencing capabilities (this is case-sensitive).</li>
                </ul>
            </div>
        </p>

        <p>To allow Gimbal location to function, you need to add a few elements to your <code>AndroidManifest.xml</code> file.</p>

        <p>First, you need to specify the permissions that Gimbal needs to function properly. They are shown below.</p>

        <pre class="prettyprint lang-xml">
            &lt;uses-permission android:name="android.permission.INTERNET" /&gt;
            &lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt;
            &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
            &lt;uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /&gt;
            &lt;uses-permission android:name="android.permission.WAKE_LOCK" /&gt;
            &lt;uses-permission android:name="android.permission.BATTERY_STATS" /&gt;
            &lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;
            &lt;uses-permission android:name="android.permission.WRITE_SETTINGS" /&gt;
            &lt;uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /&gt;
        </pre>

        <p>Then, you need to add a service and a receiver to your application. Make sure you place them inside of the <code>&lt;application&gt;&lt;/application&gt;</code> XML element. Where it says "com.companyname.applicationname" in red, replace it with your application's package name. (the package name you entered when you generated your API key)</p> 

        <pre class="prettyprint lang-xml">
            &lt;service
            android:name="com.qualcommlabs.usercontext.service.GimbalService"
            android:exported="false" &gt;
                &lt;intent-filter&gt;
                   &lt;action android:name="<span class="nocode">com.companyname.applicationname</span>.service.USER_CONTEXT_SERVICE" /&gt;
                 &lt;/intent-filter&gt;
            &lt;/service&gt;

            &lt;receiver
            android:name="com.qualcommlabs.usercontext.service.UserContextServiceStartStopReceiver"
            android:enabled="true" &gt;
                &lt;intent-filter&gt;
                     &lt;action android:name="android.intent.action.BOOT_COMPLETED" /&gt;
                &lt;/intent-filter&gt;
                &lt;intent-filter&gt;
                    &lt;action android:name="android.intent.action.ACTION_SHUTDOWN" /&gt;
                &lt;/intent-filter&gt;
            &lt;/receiver&gt;
        </pre>

    </div>
</div>

<div id="enable_context_core_connector" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Enable Context Core Connector</h2>

        <p>Now, we will add code to your MainActivity which is located in <code>src/com.companyname.applicationname/MainActivity.java</code>. This file should have been generated automatically when you created the project. It will contain a few overridden methods by default. You can leave them the way they are for now.</p>

        <p><img src="../../images/eclipse-main-activity.png"></p>

        <p><b><span class="label label-important">Important</span></b> We are adding the code here for the purpose of demonstrating how to quickly
        get an application functioning. The location of this code in your
        application will depend on your design and intended usage of Gimbal.</p>

        <p>First, import the necessary files: </p>

        <pre class="prettyprint lang-java">
            import android.util.Log;

            import com.qualcommlabs.usercontext.Callback;
            import com.qualcommlabs.usercontext.ContextCoreConnector;
            import com.qualcommlabs.usercontext.ContextCoreConnectorFactory;
        </pre>

        <p>Then, in your <code>onCreate()</code> method obtain an instance of the <code>ContextCoreConnector</code> and store it in a field. At the end, we call a private helper method called <code>checkContextConnectorStatus()</code>. Don't worry about any errors Eclipse gives you for writing this line because we will implement the method in a few steps: </p>

        <pre class="prettyprint lang-java">
            private ContextCoreConnector contextCoreConnector;
            
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_location);
                contextCoreConnector = ContextCoreConnectorFactory.get(this);
                checkContextConnectorStatus();
            }
        </pre>

        <p>Finally, write the <code>checkContextConnectorStatus()</code> method we mentioned earlier. First, it checks to see if the permission has been enabled by the user. If it has then we use other Gimbal features (Geofencing, Communication, Interest Sensing, etc). If it hasn't then we call <code>enable()</code>. This prompts the user to accept terms of service and enable gimbal. If <code>enable()</code> succeeds, we are ready to use Gimbal features. Otherwise, we log the error message: </p>

        <pre class="prettyprint lang-java">
           private void checkContextConnectorStatus() {
                if (contextCoreConnector.isPermissionEnabled()) {
                    // Gimbal is already enabled
                }
                else {
                    contextCoreConnector.enable(this, new Callback&lt;Void&gt;() {

                        @Override
                        public void success(Void arg0) {
                            // Gimbal is ready
                        }

                        @Override
                        public void failure(int arg0, String arg1) {
                            Log.e("failed to enable", arg1);
                        }
                    });
                }
            }

        </pre>

    </div>
</div>

<div id="run_application" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Run Your Application</h2>

        <p>Now, you are ready to add varioud Gimbal features. In order to launch the application make sure your phone is plugged in and in debug mode, then in Eclipse right click on your project and click <code>Run as -> Android Application</code>. Upon successful launch, you will be prompted to accept Gimbal terms of service.</p>
    </div>
</div>

         <hr/>

        <h1>Geofence</h1>
        <div id="listen_for_places" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Listen for Places</h2>

        <p>Now, we will continue adding code to your <code>MainActivity</code>. This code will allow you to start listening for places. </p>

        <p>First, import some more files: </p>

        <pre class="prettyprint lang-java">
            import android.widget.Toast;

            import com.qualcommlabs.usercontext.ContextPlaceConnector;
            import com.qualcommlabs.usercontext.ContextPlaceConnectorFactory;
            import com.qualcommlabs.usercontext.PlaceEventListener;
            import com.qualcommlabs.usercontext.protocol.PlaceEvent;
        </pre>

        <p>Then, add some fields to hold an instance of the <code>ContextPlaceConnector</code> and a <code>PlaceEventListener</code>. Initialize your <code>PlaceEventListener</code> and tell it what to do when a place event occurs (e.g. when you break a geofence). The one we have made will log and toast the name and id of any geofences that are triggered: </p>

        <pre class="prettyprint lang-java">
            private ContextPlaceConnector contextPlaceConnector;
            private PlaceEventListener placeEventListener = new PlaceEventListener() {

                    @Override
                    public void placeEvent(PlaceEvent event) {
                        String placeNameAndId = "id: " + event.getPlace().getId() + " name: " + event.getPlace().getPlaceName();
                        Toast toast = Toast.makeText(getApplicationContext(), placeNameAndId, Toast.LENGTH_LONG);
                        toast.show();
                        Log.i("found place", placeNameAndId);
                    }
                };
        </pre>

        <p>In your <code>onCreate()</code> method add a line to obtain the instance of the <code>ContextPlaceConnector</code>. Your <code>onCreate()</code> method should end up like this: </p>

        <pre class="prettyprint lang-java">
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_location);
                contextCoreConnector = ContextCoreConnectorFactory.get(this);
                contextPlaceConnector = ContextPlaceConnectorFactory.get(this);
                checkContextConnectorStatus();
            }

            private void checkContextConnectorStatus() {
                if (contextCoreConnector.isPermissionEnabled()) {
                    startListeningForGeofences();
                }
                else {
                    contextCoreConnector.enable(this, new Callback&lt;Void&gt;() {

                        @Override
                        public void success(Void arg0) {
                            startListeningForGeofences();
                        }

                        @Override
                        public void failure(int arg0, String arg1) {
                            Log.e("failed to enable", arg1);
                        }
                    });
                }
            }

        </pre>

        <p>Finally, implement the <code>ForGeofences()</code> method that we call from <code>checkContextConnectorStatus()</code>. In this case, it is really simple and just adds the <code>PlaceEventListener</code> we made earlier to the <code>ContextPlaceConnector</code>: </p>

        <pre class="prettyprint lang-java">
            private void startListeningForGeofences() {
                contextPlaceConnector.addPlaceEventListener(placeEventListener);
            }
        </pre>

    </div>
</div>

<div id="create_geofence" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Create a Geofence</h2>

        <p>Before you run your application, you want to create a geofence for your current location so you will see a place event trigger when your
        application starts.</p>

        <p><b><span class="label label-info">Note</span></b> Make sure the geofence you create is at your
            current location if you want it to trigger when your app launches.</p>

        <p><a href="https://manager.gimbal.com/geofence/new"
              class="btn btn-primary btn-large" target="_blank">Create Geofence &raquo;</a></p>

        <p><img src="../../images/create-geofence.png"></p>

    </div>
</div>

<div id="run_application" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Run Your Application</h2>

        <p>Now, everything should be ready for you to find some geofences. Make sure your phone is plugged in and in debug mode, then in Eclipse right click on your project and click <code>Run as -> Android Application</code>. Upon successful launch, you will be prompted to accept Gimbal terms of service. Once you do that you will see a toast and log entry with the name and id of the geofence you just made assuming it is around your location.</p>

        <p><b><span class="label label-info">Note</span></b> You will only get the geofence entered event when you install the application for the first time. All subsequent times you will have to leave the geofence and re-enter to get another event.</p>

    </div>
</div>

        <hr />

        <h1>Push</h1>        
        <div id="google_setup" class="row-fluid">
    <div style="height: 4 0px;"></div>
    <div class="span12">

        <h2>Google Cloud Messaging (GCM)</h2>

        <p>Gimbal uses Google Cloud Messaging (GCM) for enabling push on Android. In order to use GCM you'll have to setup your application on Google Devloper Console and obtain a GCM Sender ID and the Server key for the GCM Service. Please refer to <a href="http://developer.android.com/google/gcm/gs.html">GCM getting started</a> and follow the steps to generate these keys. Here's an overview of the steps you'll have to follow:</p>

        <p>From <a href="https://console.developers.google.com/">Google Developer Console</a></p>
        <div class="well">
            <ul>
                <li>Create an Google API project</li>
                <li>Note: GCM Sender ID is generated here</li>
                <li>Enable the GCM for Android Service from the side menu APIs & auth > APIs</li>
                <li>Obtain an API Key</li>
                <li>Create new Key(Server key) from the side menu APIs & auth > Credentials > Public API access</li>
                <li>Note: Server API key is generated here</li>
            </ul>
        </div>

         <p><b><span class="label label-info">Note</span></b> Before moving forward make sure that you have obtained the Server key and Sender ID (project number) from Google Developer Console. Also ensure that Google Cloud Messaging for Android is enabled for your application.</p>

    </div>
</div>


<div id="enable_gimbal_push" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Enable Gimbal Push</h2>

        <p>Once you have obtained the Server API key (Noted as Google Cloud Messaging Key in Gimbal Manager) and Sender ID from Google Developer Console for you application follow these steps to enable Push on Android using Gimbal</p>

    </div>
</div>

<div id="add_push_to_manager" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Add Google API to Gimbal Manager</h2>

        <p>On Gimbal Manager, select your existing Android application and scroll down to the Google Cloud Messaging Key section to setup Android push. Enter the Server API Key (created from Google Developer Console) and save. Now your application on Manager is set to send push messages to your Android application running on the device.</p>

        <p><img src="../../images/gcm.png" width="1100" height="350"/></p>

    </div>
</div>

<div id="add_push_to_application" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Configuring the Client Application</h2>

        <div id="add_google_play_services" class="row-fluid">
            <div class="span12">
                <h3>Add Google Play Services</h3>

                <p>Google Play service is used on the client to enable receiving push messages. Add Google Play Services apklib project as a library to your existing application. Google has detailed instructions <a href="http://developer.android.com/google/play-services/setup.html">here</a> to set it up. Here's an overview of the steps you'll have to follow:</p>
                <p><b><span class="label label-important">Important</span></b> When adding Google Play Services with Gimbal Proximity SDK, please use a version prior to 6 to avoid deprecation errors. </p>

                <div class="well">
                    <ul>
                        <li>Download Google Play Service from Android SDK Manager</li>
                        <li>Import google-play-services_lib project in Eclipse as existing android project (Usually found at &lt;android-installation&gt;/extras/google/google_play_services/libproject/google-play-services_lib)</li>
                        <li>Add a reference to the apklib project on your project. Detailed instructions <a href="http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject">here</a>.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="application_manifest_changes" class="row-fluid">
            <div class="span12">
                <h3>Application Manifest Changes</h3>

                <p>Edit your application's <code>AndroidManifest.xml</code> file, and add the following declaration within the <code>&lt;application&gt;</code> element. This embeds the version of Google Play services that the app was compiled with.</p>

<pre class="prettyprint lang-xml">
    &lt;meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /&gt;
</pre>

                <p>Also add these permissions to your application's <code>AndroidManifest.xml</code> file (in addition to all permissions needed by Gimbal) to allow Google to send push messages to your application.</p>

<pre class="prettyprint lang-xml">
    &lt;uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /&gt;
    &lt;permission android:name="<span class="nocode">com.companyname.applicationname</span>.permission.C2D_MESSAGE" android:protectionLevel="signature" /&gt;
    &lt;uses-permission android:name="<span class="nocode">com.companyname.applicationname</span>.permission.C2D_MESSAGE" /&gt;
</pre>

                <p><b><span class="label label-info">Note</span></b> Make sure to change <code>"com.companyname.applicationname"</code> to your application's package name in above permissions.</p>
            </div>
        </div>
        <div id="register_for_push_notifications" class="row-fluid">
            <div class="span12">
                <h3>Register for Push Notifications</h3>

                <p>Once Gimbal is enabled in your application you can tell Gimbal your application is interested in receiving Push Messages. You can make a call to <code>ContextPushNotificationsConnector.registerForRemoteNotification</code> to register with Gimbal to receive Push. SENDER_ID is the project number that was generated when you created a project on Google Cloud Console.</p>

                <pre class="prettyprint lang-js">

    contextCoreConnector.enable(this, new Callback<Void>() {
        @Override
        public void success(Void responseObject) {
            ContextPushNotificationsConnector.registerForRemoteNotification(context, SENDER_ID);
        }

        @Override
        public void failure(int statusCode, String errorMessage) {
            //Failed
        }
    });
                </pre>

            </div>
        </div>

        <div id="receive_push_content" class="row-fluid">
            <div class="span12">
                <h3>Receive Push Content</h3>

                <p>In order to receive Push Content, create an instance of <code>ContextCoreConnector</code> or use the instance that was created earlier and add an implementation of <code>ContentListener</code> to it. Whenever a push is sent to the client, Gimbal will call your application on <code>ContentListener.contentEvent</code>. Your application can now decide whether or not to raise a notification to the User.</p>

                <pre class="prettyprint lang-js">
                
    ContextCoreConnector contextCoreConnector = ContextCoreConnectorFactory.get(context);
        contextCoreConnector.addContentListener(new ContentListener() {
        @Override
        public void contentEvent(ContentEvent contentEvent) {
            // Push Content Received
        }
    });
                  </pre>

                <p><b><span class="label label-info">Note</span></b> If you want your Listener to survive service/device restart, then make sure you have an Android Service in your application that is started as <code>STICKY</code> and the above code is executed in <code>onCreate</code> of the service.</p>
                <p><b><span class="label label-info">Note</span></b> In order to send Push only to users in certain geofences, you'll have to add <code>place.state.available.on.server=true</code> to usercontext.properties in your application.</p>
            </div>
        </div>
    </div>
</div>

<div id="send_time_triggered_push_to_application" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Schedule Time Triggered Push</h2>

        <p>You are ready to schedule a Time Trigerred Push to the client. Make sure you run your application on a device and enable Gimbal. Go to the Communication tab on Gimbal Manager to send a Time Trigerred Push. Click on Add Communication on the right and select Communication.</p>

        <p><img src="../../images/add_time_trigger_communicate.png"/></p>
        
        <p>Go to the Triggers tab and select triggers type to 'Time'. You will be able schedule time triggered push here.</p>
        <p><img src="../../images/publish_time_trigger_communicate.png"/></p>

    </div>
</div>

<div id="send_push_to_application" class="row-fluid">
    <div style="height: 40px;"></div>
    <div class="span12">

        <h2>Send Instant Push</h2>

        <p>You are ready to send an Instant Push to the client. Make sure you run your application on a device and enable Gimbal. Go to the Communications tab on Gimbal Manager to send an Instant Push. Click on Add Communication on the right and select Instant Communication.</p>

        <p><img src="../../images/add_instant_communication.png"/></p>
        
        <p>On the next page fill in the details of your push message and click on Save &amp; Publish to send your Instant Communication to your device.</p>
        <p><img src="../../images/publish_instant_communication.png"/></p>

    </div>
</div>


        <div id="learn_more" class="row-fluid">
            <div style="height: 40px;"></div>
            <div class="span12">

                <h1>Learn More</h1>

                <div class="row-fluid">
                    <div class="span12">

                        <p>For additional details on how to leverage the SDK functionality, refer to the sample
                            applications and documentation included in the zip file provided.</p>

                        <p><a href="../../android/v1/devguide.html" class="btn btn-primary btn-large" target="_blank">Detailed Gimbal
                            Android Guide &raquo;</a></p>

                    </div>
                </div>

            </div>
        </div>

    </div>
</div>


    <footer class="row-fluid">

         

             <div id="footer" class="span12">

        <p>&copy; 2014 Gimbal, Inc. All rights reserved. Gimbal is a trademark of Gimbal, Inc.,registered in the United States and other countries. QUALCOMM is a trademark of QUALCOMM Incorporated, registered in the United States and other countries.</p>
        <p>Use of the iBeacon logo means that a Licensed Product has been designed and certified by the manufacturer to meet Apple performance standards. Apple is not responsible for the operation of this device or its compliance with safety and regulatory standards. Please note that the use of this product with iPod, iPhone, or iPad may affect wireless performance.
        </p>
        <p>
        iPad, iPhone, iPod, and iPod touch are trademarks of Apple Inc., registered in the U.S. and other countries. iBeacon is a trademark of Apple Inc.
        </p>

            </div>
         

    </footer>

 

                

<script src="../../js/jquery-1.8.2.min.js"></script>
<script src="../../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../js/prettify.js"></script>
<script type="text/javascript" src="../../js/nav-scrolling.js"></script>

</body>
</html>